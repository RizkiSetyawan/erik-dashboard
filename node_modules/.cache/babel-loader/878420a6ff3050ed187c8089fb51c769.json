{"ast":null,"code":"import _slicedToArray from \"/Users/rizki/Documents/work/dashboard-erik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/rizki/Documents/work/dashboard-erik/src/views/DataPO/DataPO.jsx\";\nimport React, { forwardRef, createRef, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport moment from 'moment';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Refresh from '@material-ui/icons/Refresh';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport DashboardLayout from 'layouts/Dashboard';\nimport { withStyles } from '@material-ui/core/styles';\nimport AddPO from './Components/AddPO';\nimport SnackbarComponent from '../../components/Snackbar/SnackbarComponent';\nvar tableIcons = {\n  Add: forwardRef(function (props, ref) {\n    return React.createElement(AddBox, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }));\n  }),\n  Check: forwardRef(function (props, ref) {\n    return React.createElement(Check, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    }));\n  }),\n  Clear: forwardRef(function (props, ref) {\n    return React.createElement(Clear, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }));\n  }),\n  Delete: forwardRef(function (props, ref) {\n    return React.createElement(DeleteOutline, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }));\n  }),\n  DetailPanel: forwardRef(function (props, ref) {\n    return React.createElement(ChevronRight, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }));\n  }),\n  Edit: forwardRef(function (props, ref) {\n    return React.createElement(Edit, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }));\n  }),\n  Export: forwardRef(function (props, ref) {\n    return React.createElement(SaveAlt, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }));\n  }),\n  Filter: forwardRef(function (props, ref) {\n    return React.createElement(FilterList, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }));\n  }),\n  FirstPage: forwardRef(function (props, ref) {\n    return React.createElement(FirstPage, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }));\n  }),\n  LastPage: forwardRef(function (props, ref) {\n    return React.createElement(LastPage, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }));\n  }),\n  NextPage: forwardRef(function (props, ref) {\n    return React.createElement(ChevronRight, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }));\n  }),\n  PreviousPage: forwardRef(function (props, ref) {\n    return React.createElement(ChevronLeft, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }));\n  }),\n  Refresh: forwardRef(function (props, ref) {\n    return React.createElement(Refresh, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }));\n  }),\n  ResetSearch: forwardRef(function (props, ref) {\n    return React.createElement(Clear, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }));\n  }),\n  Search: forwardRef(function (props, ref) {\n    return React.createElement(Search, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }));\n  }),\n  SortArrow: forwardRef(function (props, ref) {\n    return React.createElement(ArrowUpward, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }));\n  }),\n  ThirdStateCheck: forwardRef(function (props, ref) {\n    return React.createElement(Remove, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }));\n  }),\n  ViewColumn: forwardRef(function (props, ref) {\n    return React.createElement(ViewColumn, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }));\n  })\n};\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      padding: theme.spacing.unit * 4\n    },\n    item: {\n      height: '100%'\n    }\n  };\n};\n\nvar DataPo = function DataPo(props) {\n  var tableRef = createRef();\n  var classes = props.classes;\n\n  var _React$useState = React.useState({\n    columns: [{\n      title: 'No PO',\n      field: 'no_po'\n    }, {\n      title: 'Tanggal PO',\n      field: 'tgl_po',\n      render: function render(row) {\n        return moment(Date.now(row.tgl_po)).format(\"DD-MM-YYYY\");\n      }\n    }, {\n      title: 'Nama pelanggan',\n      field: 'nama_plg'\n    }, {\n      title: 'Nama Barang',\n      field: 'nama_brg'\n    }, {\n      title: 'Jumlah',\n      field: 'jumlah'\n    }, {\n      title: 'Tanggal Kirim',\n      field: 'tgl_krm',\n      type: 'date',\n      render: function render(row) {\n        return moment(Date.now(row.tgl_krm)).format(\"DD-MM-YYYY\");\n      }\n    }, {\n      title: 'Status',\n      field: 'status'\n    }]\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      state = _React$useState2[0];\n\n  var _useState = useState({\n    open: false,\n    message: '',\n    variant: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      snackbarAdd = _useState2[0],\n      setSnackbarAdd = _useState2[1];\n\n  var handleCloseSnackbarAdd = function handleCloseSnackbarAdd(event, reason) {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setSnackbarAdd({\n      open: false,\n      message: '',\n      variant: ''\n    });\n  };\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      openAdd = _useState4[0],\n      setOpenAdd = _useState4[1];\n\n  var modalAdd = function modalAdd(func) {\n    return setOpenAdd(!openAdd);\n  };\n\n  var refreshData = function refreshData() {\n    tableRef.current && tableRef.current.onQueryChange();\n  };\n\n  var getData = function getData() {\n    return function (query) {\n      return new Promise(function (resolve, reject) {\n        fetch(\"http://localhost:8001/api/po\" + \"?limit=\".concat(query.pageSize, \"&page=\").concat(query.page + 1, \"&search=\").concat(query.search)).then(function (res) {\n          return res.json();\n        }).then(function (result) {\n          console.log(result);\n          resolve({\n            data: result[0].data,\n            // your data array\n            page: result[0].page - 1,\n            // current page number\n            totalCount: result[0].total // total value\n\n          });\n        });\n      });\n    };\n  };\n\n  var addData = function addData(item) {\n    return fetch(\"http://localhost:8001/api/po\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      refreshData();\n      setOpenAdd(false);\n      setSnackbarAdd({\n        open: true,\n        message: 'PO berhasil ditambahkan',\n        variant: 'success'\n      });\n    });\n  };\n\n  var deleteData = function deleteData() {\n    return function (oldData) {\n      return new Promise(function (resolve) {\n        fetch(\"http://localhost:8001/api/barang\" + \"/\".concat(oldData.kode_barang), {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (result) {\n          resolve(refreshData(), setSnackbarAdd({\n            open: true,\n            message: 'PO berhasil dihapus',\n            variant: 'error'\n          }));\n        });\n      });\n    };\n  };\n\n  var updateData = function updateData() {\n    return function (newData, oldData) {\n      return new Promise(function (resolve) {\n        fetch(\"http://localhost:8001/api/barang\" + \"/\".concat(oldData.kode_barang), {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(newData)\n        }).then(function (res) {\n          return res.json();\n        }).then(function (result) {\n          resolve(refreshData(), setSnackbarAdd({\n            open: true,\n            message: 'PO berhasil di update',\n            variant: 'info'\n          }));\n        });\n      });\n    };\n  };\n\n  return React.createElement(DashboardLayout, {\n    title: \"Data PO\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, snackbarAdd.open && React.createElement(SnackbarComponent, {\n    open: snackbarAdd.open,\n    handleClose: handleCloseSnackbarAdd,\n    variant: snackbarAdd.variant,\n    message: snackbarAdd.message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }), openAdd && React.createElement(AddPO, {\n    openAdd: openAdd,\n    modalAdd: modalAdd,\n    addFunc: addData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }), React.createElement(MaterialTable, {\n    title: \"Data Pre Order\",\n    tableRef: tableRef,\n    icons: tableIcons,\n    columns: state.columns,\n    data: getData(),\n    actions: [{\n      icon: tableIcons.Add,\n      tooltip: 'Add',\n      isFreeAction: true,\n      onClick: function onClick() {\n        return modalAdd(refreshData);\n      }\n    }, {\n      icon: tableIcons.Refresh,\n      tooltip: 'Refresh',\n      isFreeAction: true,\n      onClick: function onClick() {\n        return refreshData();\n      }\n    }],\n    editable: {\n      onRowDelete: deleteData(),\n      onRowUpdate: updateData()\n    },\n    options: {\n      actionsColumnIndex: -1,\n      exportButton: true,\n      paginationType: 'stepped',\n      pageSize: 10,\n      pageSizeOptions: [10, 25, 50],\n      debounceInterval: 0,\n      exportAllData: true\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  })));\n};\n\nexport default withStyles(styles)(DataPo);","map":{"version":3,"sources":["/Users/rizki/Documents/work/dashboard-erik/src/views/DataPO/DataPO.jsx"],"names":["React","forwardRef","createRef","useState","MaterialTable","moment","AddBox","ArrowUpward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Refresh","Remove","SaveAlt","Search","ViewColumn","DashboardLayout","withStyles","AddPO","SnackbarComponent","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","styles","theme","root","padding","spacing","unit","item","height","DataPo","tableRef","classes","columns","title","field","render","row","Date","now","tgl_po","format","type","tgl_krm","state","open","message","variant","snackbarAdd","setSnackbarAdd","handleCloseSnackbarAdd","event","reason","openAdd","setOpenAdd","modalAdd","func","refreshData","current","onQueryChange","getData","query","Promise","resolve","reject","fetch","pageSize","page","search","then","res","json","result","console","log","data","totalCount","total","addData","method","headers","body","JSON","stringify","deleteData","oldData","kode_barang","updateData","newData","icon","tooltip","isFreeAction","onClick","onRowDelete","onRowUpdate","actionsColumnIndex","exportButton","paginationType","pageSizeOptions","debounceInterval","exportAllData"],"mappings":"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","sourcesContent":["import React, { forwardRef, createRef, useState } from 'react'\nimport MaterialTable from 'material-table';\nimport moment from 'moment';\n\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Refresh from '@material-ui/icons/Refresh';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\n\nimport DashboardLayout from 'layouts/Dashboard';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AddPO from './Components/AddPO'\nimport SnackbarComponent from '../../components/Snackbar/SnackbarComponent'\n\nconst tableIcons = {\n   Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n   Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n   Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n   Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n   DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n   Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n   Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n   Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n   FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n   LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n   NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n   PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n   Refresh: forwardRef((props, ref) => <Refresh {...props} ref={ref} />),\n   ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n   Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n   SortArrow: forwardRef((props, ref) => <ArrowUpward {...props} ref={ref} />),\n   ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n   ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\nconst styles = theme => ({\n   root: {\n      padding: theme.spacing.unit * 4\n   },\n   item: {\n      height: '100%'\n   }\n});\n\nconst DataPo = (props) => {\n   const tableRef = createRef();\n   const { classes } = props;\n\n   const [state] = React.useState({\n      columns: [\n         { title: 'No PO', field: 'no_po' },\n         { title: 'Tanggal PO', field: 'tgl_po', render: row => moment(Date.now(row.tgl_po)).format(\"DD-MM-YYYY\")},\n         { title: 'Nama pelanggan', field: 'nama_plg' },\n         { title: 'Nama Barang', field: 'nama_brg' },\n         { title: 'Jumlah', field: 'jumlah' },\n         { title: 'Tanggal Kirim', field: 'tgl_krm', type: 'date', render: row => moment(Date.now(row.tgl_krm)).format(\"DD-MM-YYYY\")},\n         { title: 'Status', field: 'status' }\n      ]\n   });\n\n   const [snackbarAdd, setSnackbarAdd] = useState({\n      open: false,\n      message: '',\n      variant: ''\n   })\n   const handleCloseSnackbarAdd = (event, reason) => {\n      if (reason === 'clickaway') {\n         return;\n      }\n      setSnackbarAdd({\n         open: false,\n         message: '',\n         variant: ''\n      })\n   }\n\n   const [openAdd, setOpenAdd] = useState(false)\n   const modalAdd = (func) => setOpenAdd(!openAdd)\n\n   const refreshData = () => {\n      tableRef.current && tableRef.current.onQueryChange()\n   }\n\n   const getData = () => {\n      return query =>\n         new Promise((resolve, reject) => {\n            fetch(\"http://localhost:8001/api/po\" + `?limit=${query.pageSize}&page=${query.page + 1}&search=${query.search}`)\n               .then(res => res.json())\n               .then(result => {\n                  console.log(result)\n                  resolve({\n                     data: result[0].data, // your data array\n                     page: result[0].page - 1, // current page number\n                     totalCount: result[0].total // total value\n                  })\n               })\n         })\n   }\n\n   const addData = item => {\n      return fetch(\"http://localhost:8001/api/po\", {\n         method: 'POST',\n         headers: {\n            'Content-Type': 'application/json'\n         },\n         body: JSON.stringify(item)\n      })\n         .then(res => res.json())\n         .then(result => {\n            refreshData()\n            setOpenAdd(false)\n            setSnackbarAdd({\n               open: true,\n               message: 'PO berhasil ditambahkan',\n               variant: 'success'\n            })\n         })\n   }\n\n   const deleteData = () => {\n      return oldData =>\n         new Promise(resolve => {\n            fetch(\"http://localhost:8001/api/barang\" + `/${oldData.kode_barang}`, {\n               method: 'DELETE',\n               headers: {\n                  'Content-Type': 'application/json'\n               }\n            })\n               .then(res => res.json())\n               .then(result => {\n                  resolve(\n                     refreshData(),\n                     setSnackbarAdd({\n                        open: true,\n                        message: 'PO berhasil dihapus',\n                        variant: 'error'\n                     })\n                  )\n               })\n         })\n   }\n\n   const updateData = () => {\n      return (newData, oldData) =>\n         new Promise(resolve => {\n            fetch(\"http://localhost:8001/api/barang\" + `/${oldData.kode_barang}`, {\n               method: 'PUT',\n               headers: {\n                  'Content-Type': 'application/json'\n               },\n               body: JSON.stringify(newData)\n            })\n               .then(res => res.json())\n               .then(result => {\n                  resolve(\n                     refreshData(),\n                     setSnackbarAdd({\n                        open: true,\n                        message: 'PO berhasil di update',\n                        variant: 'info'\n                     })\n                  )\n               })\n         })\n   }\n\n   return (\n      <DashboardLayout title=\"Data PO\">\n         <div className={classes.root}>\n\n            {snackbarAdd.open &&\n               <SnackbarComponent\n                  open={snackbarAdd.open}\n                  handleClose={handleCloseSnackbarAdd}\n                  variant={snackbarAdd.variant}\n                  message={snackbarAdd.message}\n               />\n            }\n\n            {openAdd &&\n               <AddPO\n                  openAdd={openAdd}\n                  modalAdd={modalAdd}\n                  addFunc={addData}\n               />\n            }\n            <MaterialTable\n               title=\"Data Pre Order\"\n               tableRef={tableRef}\n               icons={tableIcons}\n               columns={state.columns}\n               data={getData()}\n               actions={[\n                  {\n                     icon: tableIcons.Add,\n                     tooltip: 'Add',\n                     isFreeAction: true,\n                     onClick: () => modalAdd(refreshData)\n                  },\n                  {\n                     icon: tableIcons.Refresh,\n                     tooltip: 'Refresh',\n                     isFreeAction: true,\n                     onClick: () => refreshData()\n                  }\n               ]}\n               editable={{\n                  onRowDelete: deleteData(),\n                  onRowUpdate: updateData()\n               }}\n               options={{\n                  actionsColumnIndex: -1,\n                  exportButton: true,\n                  paginationType: 'stepped',\n                  pageSize: 10,\n                  pageSizeOptions: [10, 25, 50],\n                  debounceInterval: 0,\n                  exportAllData: true,\n               }}\n            />\n         </div>\n      </DashboardLayout>\n   )\n}\n\nexport default withStyles(styles)(DataPo);\n"]},"metadata":{},"sourceType":"module"}