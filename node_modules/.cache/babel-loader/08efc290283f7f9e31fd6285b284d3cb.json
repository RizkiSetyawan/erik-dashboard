{"ast":null,"code":"import _slicedToArray from \"/Users/rizki/Documents/work/dashboard-erik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/rizki/Documents/work/dashboard-erik/src/views/StokBarang/StokBarang.jsx\";\nimport React, { forwardRef, createRef, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Refresh from '@material-ui/icons/Refresh';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport DashboardLayout from 'layouts/Dashboard';\nimport { withStyles } from '@material-ui/core/styles';\nimport AddBarang from './Components/AddBarang';\nimport SnackbarComponent from '../../components/Snackbar/SnackbarComponent';\nvar tableIcons = {\n  Add: forwardRef(function (props, ref) {\n    return React.createElement(AddBox, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }));\n  }),\n  Check: forwardRef(function (props, ref) {\n    return React.createElement(Check, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }));\n  }),\n  Clear: forwardRef(function (props, ref) {\n    return React.createElement(Clear, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    }));\n  }),\n  Delete: forwardRef(function (props, ref) {\n    return React.createElement(DeleteOutline, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }));\n  }),\n  DetailPanel: forwardRef(function (props, ref) {\n    return React.createElement(ChevronRight, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }));\n  }),\n  Edit: forwardRef(function (props, ref) {\n    return React.createElement(Edit, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }));\n  }),\n  Export: forwardRef(function (props, ref) {\n    return React.createElement(SaveAlt, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }));\n  }),\n  Filter: forwardRef(function (props, ref) {\n    return React.createElement(FilterList, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }));\n  }),\n  FirstPage: forwardRef(function (props, ref) {\n    return React.createElement(FirstPage, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }));\n  }),\n  LastPage: forwardRef(function (props, ref) {\n    return React.createElement(LastPage, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }));\n  }),\n  NextPage: forwardRef(function (props, ref) {\n    return React.createElement(ChevronRight, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }));\n  }),\n  PreviousPage: forwardRef(function (props, ref) {\n    return React.createElement(ChevronLeft, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }));\n  }),\n  Refresh: forwardRef(function (props, ref) {\n    return React.createElement(Refresh, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }));\n  }),\n  ResetSearch: forwardRef(function (props, ref) {\n    return React.createElement(Clear, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }));\n  }),\n  Search: forwardRef(function (props, ref) {\n    return React.createElement(Search, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }));\n  }),\n  SortArrow: forwardRef(function (props, ref) {\n    return React.createElement(ArrowUpward, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }));\n  }),\n  ThirdStateCheck: forwardRef(function (props, ref) {\n    return React.createElement(Remove, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }));\n  }),\n  ViewColumn: forwardRef(function (props, ref) {\n    return React.createElement(ViewColumn, Object.assign({}, props, {\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }));\n  })\n};\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      padding: theme.spacing.unit * 4\n    },\n    item: {\n      height: '100%'\n    }\n  };\n};\n\nvar StokBarang = function StokBarang(props) {\n  var tableRef = createRef();\n  var classes = props.classes;\n\n  var _React$useState = React.useState({\n    columns: [{\n      title: 'Kode Barang',\n      field: 'kode_barang'\n    }, {\n      title: 'Nama Barang',\n      field: 'nama_barang'\n    }, {\n      title: 'Tipe',\n      field: 'tipe'\n    }, {\n      title: 'Accept',\n      field: 'accept'\n    }, {\n      title: 'Rejects',\n      field: 'rejects'\n    }, {\n      title: 'Harga',\n      field: 'harga',\n      type: 'currency',\n      currencySetting: {\n        currencyCode: 'IDR'\n      }\n    }]\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      state = _React$useState2[0];\n\n  var _useState = useState({\n    open: false,\n    message: '',\n    variant: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      snackbarAdd = _useState2[0],\n      setSnackbarAdd = _useState2[1];\n\n  var handleCloseSnackbarAdd = function handleCloseSnackbarAdd(event, reason) {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setSnackbarAdd({\n      open: false,\n      message: '',\n      variant: ''\n    });\n  };\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      openAdd = _useState4[0],\n      setOpenAdd = _useState4[1];\n\n  var modalAdd = function modalAdd(func) {\n    return setOpenAdd(!openAdd);\n  };\n\n  var refreshData = function refreshData() {\n    tableRef.current && tableRef.current.onQueryChange();\n  };\n\n  var getData = function getData() {\n    return function (query) {\n      return new Promise(function (resolve, reject) {\n        fetch(\"http://localhost:8001/api/barang\" + \"?limit=\".concat(query.pageSize, \"&page=\").concat(query.page + 1, \"&search=\").concat(query.search)).then(function (res) {\n          return res.json();\n        }).then(function (result) {\n          resolve({\n            data: result[0].data,\n            // your data array\n            page: result[0].page - 1,\n            // current page number\n            totalCount: result[0].total // total value\n\n          });\n        });\n      });\n    };\n  };\n\n  var addData = function addData(item) {\n    return fetch(\"http://localhost:8001/api/barang\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      refreshData();\n      setOpenAdd(false);\n      setSnackbarAdd({\n        open: true,\n        message: 'Barang berhasil ditambahkan',\n        variant: 'success'\n      });\n    });\n  };\n\n  var deleteData = function deleteData() {\n    return function (oldData) {\n      return new Promise(function (resolve) {\n        fetch(\"http://localhost:8001/api/barang\" + \"/\".concat(oldData.kode_barang), {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (result) {\n          resolve(refreshData());\n        });\n      });\n    };\n  };\n\n  var updateData = function updateData() {\n    return function (newData, oldData) {\n      return new Promise(function (resolve) {\n        fetch(\"http://localhost:8001/api/barang\" + \"/\".concat(oldData.kode_barang), {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(newData)\n        }).then(function (res) {\n          return res.json();\n        }).then(function (result) {\n          resolve(refreshData());\n        });\n      });\n    };\n  };\n\n  return React.createElement(DashboardLayout, {\n    title: \"Stok Barang\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, snackbarAdd.open && React.createElement(SnackbarComponent, {\n    open: snackbarAdd.open,\n    handleClose: handleCloseSnackbarAdd,\n    variant: snackbarAdd.variant,\n    message: snackbarAdd.message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }), openAdd && React.createElement(AddBarang, {\n    openAdd: openAdd,\n    modalAdd: modalAdd,\n    addFunc: addData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }), React.createElement(MaterialTable, {\n    title: \"Data Barang\",\n    tableRef: tableRef,\n    icons: tableIcons,\n    columns: state.columns,\n    data: getData(),\n    detailPanel: function detailPanel(rowData) {\n      return React.createElement(MaterialTable, {\n        title: \"Data Barang\",\n        tableRef: tableRef,\n        icons: tableIcons,\n        columns: state.columns,\n        data: getData(),\n        actions: [{\n          icon: tableIcons.Add,\n          tooltip: 'Add',\n          isFreeAction: true,\n          onClick: function onClick() {\n            return modalAdd(refreshData);\n          }\n        }, {\n          icon: tableIcons.Refresh,\n          tooltip: 'Refresh',\n          isFreeAction: true,\n          onClick: function onClick() {\n            return refreshData();\n          }\n        }],\n        editable: {\n          onRowDelete: deleteData(),\n          onRowUpdate: updateData()\n        },\n        options: {\n          actionsColumnIndex: -1,\n          exportButton: true,\n          paginationType: 'stepped',\n          pageSize: 10,\n          pageSizeOptions: [10, 25, 50],\n          debounceInterval: 0,\n          exportAllData: true\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      });\n    },\n    actions: [{\n      icon: tableIcons.Add,\n      tooltip: 'Add',\n      isFreeAction: true,\n      onClick: function onClick() {\n        return modalAdd(refreshData);\n      }\n    }, {\n      icon: tableIcons.Refresh,\n      tooltip: 'Refresh',\n      isFreeAction: true,\n      onClick: function onClick() {\n        return refreshData();\n      }\n    }],\n    editable: {\n      onRowDelete: deleteData(),\n      onRowUpdate: updateData()\n    },\n    options: {\n      actionsColumnIndex: -1,\n      exportButton: true,\n      paginationType: 'stepped',\n      pageSize: 10,\n      pageSizeOptions: [10, 25, 50],\n      debounceInterval: 0,\n      exportAllData: true\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  })));\n};\n\nexport default withStyles(styles)(StokBarang);","map":{"version":3,"sources":["/Users/rizki/Documents/work/dashboard-erik/src/views/StokBarang/StokBarang.jsx"],"names":["React","forwardRef","createRef","useState","MaterialTable","AddBox","ArrowUpward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Refresh","Remove","SaveAlt","Search","ViewColumn","DashboardLayout","withStyles","AddBarang","SnackbarComponent","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","styles","theme","root","padding","spacing","unit","item","height","StokBarang","tableRef","classes","columns","title","field","type","currencySetting","currencyCode","state","open","message","variant","snackbarAdd","setSnackbarAdd","handleCloseSnackbarAdd","event","reason","openAdd","setOpenAdd","modalAdd","func","refreshData","current","onQueryChange","getData","query","Promise","resolve","reject","fetch","pageSize","page","search","then","res","json","result","data","totalCount","total","addData","method","headers","body","JSON","stringify","deleteData","oldData","kode_barang","updateData","newData","rowData","icon","tooltip","isFreeAction","onClick","onRowDelete","onRowUpdate","actionsColumnIndex","exportButton","paginationType","pageSizeOptions","debounceInterval","exportAllData"],"mappings":"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","sourcesContent":["import React, { forwardRef, createRef, useState } from 'react'\nimport MaterialTable from 'material-table';\n\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Refresh from '@material-ui/icons/Refresh';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\n\nimport DashboardLayout from 'layouts/Dashboard';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AddBarang from './Components/AddBarang'\nimport SnackbarComponent from '../../components/Snackbar/SnackbarComponent'\n\nconst tableIcons = {\n   Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n   Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n   Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n   Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n   DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n   Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n   Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n   Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n   FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n   LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n   NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n   PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n   Refresh: forwardRef((props, ref) => <Refresh {...props} ref={ref} />),\n   ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n   Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n   SortArrow: forwardRef((props, ref) => <ArrowUpward {...props} ref={ref} />),\n   ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n   ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\nconst styles = theme => ({\n   root: {\n      padding: theme.spacing.unit * 4\n   },\n   item: {\n      height: '100%'\n   }\n});\n\nconst StokBarang = (props) => {\n   const tableRef = createRef();\n   const { classes } = props;\n\n   const [state] = React.useState({\n      columns: [\n         { title: 'Kode Barang', field: 'kode_barang' },\n         { title: 'Nama Barang', field: 'nama_barang' },\n         { title: 'Tipe', field: 'tipe' },\n         { title: 'Accept', field: 'accept' },\n         { title: 'Rejects', field: 'rejects' },\n         { title: 'Harga', field: 'harga', type: 'currency', currencySetting: { currencyCode: 'IDR' } }\n      ]\n   });\n\n   const [snackbarAdd, setSnackbarAdd] = useState({\n      open: false,\n      message: '',\n      variant: ''\n   })\n   const handleCloseSnackbarAdd = (event, reason) => {\n      if (reason === 'clickaway') {\n         return;\n      }\n      setSnackbarAdd({\n         open: false,\n         message: '',\n         variant: ''\n      })\n   }\n\n   const [openAdd, setOpenAdd] = useState(false)\n   const modalAdd = (func) => setOpenAdd(!openAdd)\n\n   const refreshData = () => {\n      tableRef.current && tableRef.current.onQueryChange()\n   }\n\n   const getData = () => {\n      return query =>\n         new Promise((resolve, reject) => {\n            fetch(\"http://localhost:8001/api/barang\" + `?limit=${query.pageSize}&page=${query.page + 1}&search=${query.search}`)\n               .then(res => res.json())\n               .then(result => {\n                  resolve({\n                     data: result[0].data, // your data array\n                     page: result[0].page - 1, // current page number\n                     totalCount: result[0].total // total value\n                  })\n               })\n         })\n   }\n\n   const addData = item => {\n      return fetch(\"http://localhost:8001/api/barang\", {\n         method: 'POST',\n         headers: {\n            'Content-Type': 'application/json'\n         },\n         body: JSON.stringify(item)\n      })\n         .then(res => res.json())\n         .then(result => {\n            refreshData()\n            setOpenAdd(false)\n            setSnackbarAdd({\n               open: true,\n               message: 'Barang berhasil ditambahkan',\n               variant: 'success'\n            })\n         })\n   }\n\n   const deleteData = () => {\n      return oldData =>\n         new Promise(resolve => {\n            fetch(\"http://localhost:8001/api/barang\" + `/${oldData.kode_barang}`, {\n               method: 'DELETE',\n               headers: {\n                  'Content-Type': 'application/json'\n               }\n            })\n               .then(res => res.json())\n               .then(result => {\n                  resolve(\n                     refreshData()\n                     \n                  )\n               })\n         })\n   }\n\n   const updateData = () => {\n      return (newData, oldData) =>\n         new Promise(resolve => {\n            fetch(\"http://localhost:8001/api/barang\" + `/${oldData.kode_barang}`, {\n               method: 'PUT',\n               headers: {\n                  'Content-Type': 'application/json'\n               },\n               body: JSON.stringify(newData)\n            })\n               .then(res => res.json())\n               .then(result => {\n                  resolve(\n                     refreshData()\n                  )\n               })\n         })\n   }\n\n   return (\n      <DashboardLayout title=\"Stok Barang\">\n         <div className={classes.root}>\n\n            {snackbarAdd.open &&\n               <SnackbarComponent\n                  open={snackbarAdd.open}\n                  handleClose={handleCloseSnackbarAdd}\n                  variant={snackbarAdd.variant}\n                  message={snackbarAdd.message}\n               />\n            }\n\n            {openAdd &&\n               <AddBarang\n                  openAdd={openAdd}\n                  modalAdd={modalAdd}\n                  addFunc={addData}\n               />\n            }\n            <MaterialTable\n               title=\"Data Barang\"\n               tableRef={tableRef}\n               icons={tableIcons}\n               columns={state.columns}\n               data={getData()}\n               detailPanel={rowData => {\n                  return (\n                     <MaterialTable\n                        title=\"Data Barang\"\n                        tableRef={tableRef}\n                        icons={tableIcons}\n                        columns={state.columns}\n                        data={getData()}\n                        actions={[\n                           {\n                              icon: tableIcons.Add,\n                              tooltip: 'Add',\n                              isFreeAction: true,\n                              onClick: () => modalAdd(refreshData)\n                           },\n                           {\n                              icon: tableIcons.Refresh,\n                              tooltip: 'Refresh',\n                              isFreeAction: true,\n                              onClick: () => refreshData()\n                           }\n                        ]}\n                        editable={{\n                           onRowDelete: deleteData(),\n                           onRowUpdate: updateData()\n                        }}\n                        options={{\n                           actionsColumnIndex: -1,\n                           exportButton: true,\n                           paginationType: 'stepped',\n                           pageSize: 10,\n                           pageSizeOptions: [10, 25, 50],\n                           debounceInterval: 0,\n                           exportAllData: true,\n                        }}\n                     />\n                  )\n               }}\n               actions={[\n                  {\n                     icon: tableIcons.Add,\n                     tooltip: 'Add',\n                     isFreeAction: true,\n                     onClick: () => modalAdd(refreshData)\n                  },\n                  {\n                     icon: tableIcons.Refresh,\n                     tooltip: 'Refresh',\n                     isFreeAction: true,\n                     onClick: () => refreshData()\n                  }\n               ]}\n               editable={{\n                  onRowDelete: deleteData(),\n                  onRowUpdate: updateData()\n               }}\n               options={{\n                  actionsColumnIndex: -1,\n                  exportButton: true,\n                  paginationType: 'stepped',\n                  pageSize: 10,\n                  pageSizeOptions: [10, 25, 50],\n                  debounceInterval: 0,\n                  exportAllData: true,\n               }}\n            />\n         </div>\n      </DashboardLayout>\n   )\n}\n\nexport default withStyles(styles)(StokBarang);\n"]},"metadata":{},"sourceType":"module"}