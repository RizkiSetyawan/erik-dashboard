{"ast":null,"code":"import _objectSpread from \"/Users/rizki/Documents/work/dashboard-erik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/rizki/Documents/work/dashboard-erik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/rizki/Documents/work/dashboard-erik/src/views/SignIn/index.jsx\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport AuthContext from '../../context/auth/authContext';\nimport SnackbarComponent from '../../components/Snackbar/SnackbarComponent'; // Externals\n\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport validate from 'validate.js';\nimport _ from 'underscore'; // Material helpers\n\nimport { withStyles } from '@material-ui/core/styles/index'; // Material components\n\nimport Grid from '@material-ui/core/Grid/index';\nimport Button from '@material-ui/core/Button/index';\nimport CircularProgress from '@material-ui/core/CircularProgress/index';\nimport IconButton from '@material-ui/core/IconButton/index';\nimport TextField from '@material-ui/core/TextField/index';\nimport Typography from '@material-ui/core/Typography/index'; // Component styles\n\nimport styles from './styles'; // Form validation schema\n\nimport schema from './schema';\n\nvar SignIn = function SignIn(props) {\n  var authContext = useContext(AuthContext);\n  var token = authContext.token,\n      login = authContext.login,\n      error = authContext.error,\n      clearErrors = authContext.clearErrors,\n      isAuthenticated = authContext.isAuthenticated;\n\n  var _useState = useState({\n    values: {\n      username: '',\n      password: ''\n    },\n    touched: {\n      username: false,\n      password: false\n    },\n    errors: {\n      username: null,\n      password: null\n    },\n    isValid: false,\n    isLoading: false,\n    submitError: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var _useState3 = useState({\n    open: false,\n    message: '',\n    variant: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      snackbarAdd = _useState4[0],\n      setSnackbarAdd = _useState4[1];\n\n  useEffect(function () {\n    if (isAuthenticated) {// props.history.push('/');\n    }\n\n    if (error === 'Incorrect username or password') {\n      //  setAlert(error, 'danger')\n      setSnackbarAdd({\n        open: true,\n        message: 'Username atau password yang anda masukan salah',\n        variant: 'error'\n      });\n      setState({\n        isLoading: false,\n        serviceError: error\n      });\n      clearErrors();\n    } //eslint-disable-next-line\n\n  }, [error, isAuthenticated, props.history]);\n  useEffect(function () {\n    if (token) {\n      props.history.push('/');\n    } //eslint-disable-next-line\n\n  }, []); // const validateForm = _.debounce(() => {\n  //   const { values } = state;\n  //   const newState = { ...state };\n  //   const errors = validate(values, schema);\n  //   newState.errors = errors || {};\n  //   newState.isValid = errors ? false : true;\n  //   setState(newState);\n  // }, 300);\n\n  var handleFieldChange = function handleFieldChange(field, value) {\n    var newState = _objectSpread({}, state);\n\n    newState.submitError = null;\n    newState.touched[field] = true;\n    newState.values[field] = value;\n    setState(newState, validateForm);\n  };\n\n  var handleSignIn = function handleSignIn() {\n    var history = props.history;\n    var values = state.values;\n    setState({\n      isLoading: true\n    });\n    login(values); // history.push('/dashboard');\n    // if error\n    // this.setState({\n    //   isLoading: false,\n    //   serviceError: error\n    // });\n  };\n\n  var handleCloseSnackbarAdd = function handleCloseSnackbarAdd(event, reason) {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setSnackbarAdd({\n      open: false,\n      message: '',\n      variant: ''\n    });\n  };\n\n  var classes = props.classes;\n  var values = state.values,\n      touched = state.touched,\n      errors = state.errors,\n      isValid = state.isValid,\n      submitError = state.submitError,\n      isLoading = state.isLoading;\n  var showUsernameError = touched.username && errors.username;\n  var showPasswordError = touched.password && errors.password;\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, snackbarAdd.open && React.createElement(SnackbarComponent, {\n    handleClose: handleCloseSnackbarAdd,\n    message: snackbarAdd.message,\n    open: snackbarAdd.open,\n    variant: snackbarAdd.variant,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }), React.createElement(Grid, {\n    className: classes.grid,\n    container: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    className: classes.quoteWrapper,\n    item: true,\n    lg: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.quote,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.quoteInner,\n    style: {\n      backgroundColor: 'rgba(0,0,0,.4)',\n      padding: '20px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.quoteText,\n    variant: \"h1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"PT PANCAMITRA PACKINDO\"), React.createElement(\"div\", {\n    className: classes.person,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.name,\n    variant: \"body1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"Sistem informasi\"), React.createElement(Typography, {\n    className: classes.bio,\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"Penjualan Kardus berbasis Web\"))))), React.createElement(Grid, {\n    className: classes.content,\n    item: true,\n    lg: 7,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.content,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.contentBody,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: classes.form,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.title,\n    variant: \"h2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"Sistem informasi \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }), \"Penjualan Kardus berbasis Web\"), React.createElement(\"div\", {\n    className: classes.fields,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    className: classes.textField,\n    label: \"Username\",\n    name: \"username\",\n    onChange: function onChange(event) {\n      return handleFieldChange('username', event.target.value);\n    },\n    type: \"text\",\n    value: values.username,\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }), showUsernameError && React.createElement(Typography, {\n    className: classes.fieldError,\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, errors.username[0]), React.createElement(TextField, {\n    className: classes.textField,\n    label: \"Password\",\n    name: \"password\",\n    onChange: function onChange(event) {\n      return handleFieldChange('password', event.target.value);\n    },\n    type: \"password\",\n    value: values.password,\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }), showPasswordError && React.createElement(Typography, {\n    className: classes.fieldError,\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  }, errors.password[0])), submitError && React.createElement(Typography, {\n    className: classes.submitError,\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }, submitError), isLoading ? React.createElement(CircularProgress, {\n    className: classes.progress,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252\n    },\n    __self: this\n  }) : React.createElement(Button, {\n    className: classes.signInButton,\n    color: \"primary\",\n    disabled: !isValid,\n    onClick: handleSignIn,\n    size: \"large\",\n    variant: \"contained\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  }, \"Sign in now\"), React.createElement(Typography, {\n    className: classes.signUp,\n    variant: \"body1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265\n    },\n    __self: this\n  }, \"Don't have an account? Please contact Admin\")))))));\n};\n\nSignIn.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired\n};\nexport default compose(withRouter, withStyles(styles))(SignIn);","map":{"version":3,"sources":["/Users/rizki/Documents/work/dashboard-erik/src/views/SignIn/index.jsx"],"names":["React","useState","useEffect","useContext","Link","withRouter","AuthContext","SnackbarComponent","PropTypes","compose","validate","_","withStyles","Grid","Button","CircularProgress","IconButton","TextField","Typography","styles","schema","SignIn","props","authContext","token","login","error","clearErrors","isAuthenticated","values","username","password","touched","errors","isValid","isLoading","submitError","state","setState","open","message","variant","snackbarAdd","setSnackbarAdd","serviceError","history","push","handleFieldChange","field","value","newState","validateForm","handleSignIn","handleCloseSnackbarAdd","event","reason","classes","showUsernameError","showPasswordError","root","grid","quoteWrapper","quote","quoteInner","backgroundColor","padding","quoteText","person","name","bio","content","contentBody","form","title","fields","textField","target","fieldError","progress","signInButton","signUp","propTypes","className","string","object","isRequired"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport AuthContext from '../../context/auth/authContext';\nimport SnackbarComponent from '../../components/Snackbar/SnackbarComponent';\n\n// Externals\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport validate from 'validate.js';\nimport _ from 'underscore';\n\n// Material helpers\nimport { withStyles } from '@material-ui/core/styles/index';\n\n// Material components\nimport Grid from '@material-ui/core/Grid/index';\nimport Button from '@material-ui/core/Button/index';\nimport CircularProgress from '@material-ui/core/CircularProgress/index';\nimport IconButton from '@material-ui/core/IconButton/index';\nimport TextField from '@material-ui/core/TextField/index';\nimport Typography from '@material-ui/core/Typography/index';\n\n// Component styles\nimport styles from './styles';\n\n// Form validation schema\nimport schema from './schema';\n\nconst SignIn = props => {\n  const authContext = useContext(AuthContext);\n  const { token, login, error, clearErrors, isAuthenticated } = authContext;\n\n  const [state, setState] = useState({\n    values: {\n      username: '',\n      password: ''\n    },\n    touched: {\n      username: false,\n      password: false\n    },\n    errors: {\n      username: null,\n      password: null\n    },\n    isValid: false,\n    isLoading: false,\n    submitError: null\n  });\n\n  const [snackbarAdd, setSnackbarAdd] = useState({\n    open: false,\n    message: '',\n    variant: ''\n  });\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      // props.history.push('/');\n    }\n\n    if (error === 'Incorrect username or password') {\n      //  setAlert(error, 'danger')\n      setSnackbarAdd({\n        open: true,\n        message: 'Username atau password yang anda masukan salah',\n        variant: 'error'\n      });\n      setState({\n        isLoading: false,\n        serviceError: error\n      });\n      clearErrors();\n    }\n    //eslint-disable-next-line\n  }, [error, isAuthenticated, props.history]);\n\n  useEffect(() => {\n    if (token) {\n      props.history.push('/');\n    }\n    //eslint-disable-next-line\n  }, []);\n\n  // const validateForm = _.debounce(() => {\n  //   const { values } = state;\n\n  //   const newState = { ...state };\n  //   const errors = validate(values, schema);\n\n  //   newState.errors = errors || {};\n  //   newState.isValid = errors ? false : true;\n\n  //   setState(newState);\n  // }, 300);\n\n  const handleFieldChange = (field, value) => {\n    const newState = { ...state };\n\n    newState.submitError = null;\n    newState.touched[field] = true;\n    newState.values[field] = value;\n\n    setState(newState, validateForm);\n  };\n\n\n  const handleSignIn = () => {\n    const { history } = props;\n    const { values } = state;\n\n    setState({ isLoading: true });\n\n    login(values);\n    // history.push('/dashboard');\n    // if error\n    // this.setState({\n    //   isLoading: false,\n    //   serviceError: error\n    // });\n  };\n\n  const handleCloseSnackbarAdd = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setSnackbarAdd({\n      open: false,\n      message: '',\n      variant: ''\n    });\n  };\n\n  const { classes } = props;\n  const { values, touched, errors, isValid, submitError, isLoading } = state;\n\n  const showUsernameError = touched.username && errors.username;\n  const showPasswordError = touched.password && errors.password;\n\n  return (\n    <div className={classes.root}>\n      {snackbarAdd.open && (\n        <SnackbarComponent\n          handleClose={handleCloseSnackbarAdd}\n          message={snackbarAdd.message}\n          open={snackbarAdd.open}\n          variant={snackbarAdd.variant}\n        />\n      )}\n      <Grid\n        className={classes.grid}\n        container\n      >\n        <Grid\n          className={classes.quoteWrapper}\n          item\n          lg={5}\n        >\n          <div className={classes.quote}>\n            <div\n              className={classes.quoteInner}\n              style={{ backgroundColor: 'rgba(0,0,0,.4)', padding: '20px' }}\n            >\n              <Typography\n                className={classes.quoteText}\n                variant=\"h1\"\n              >\n                PT PANCAMITRA PACKINDO\n              </Typography>\n              <div className={classes.person}>\n                <Typography\n                  className={classes.name}\n                  variant=\"body1\"\n                >\n                  Sistem informasi\n                </Typography>\n                <Typography\n                  className={classes.bio}\n                  variant=\"body2\"\n                >\n                  Penjualan Kardus berbasis Web\n                </Typography>\n              </div>\n            </div>\n          </div>\n        </Grid>\n        <Grid\n          className={classes.content}\n          item\n          lg={7}\n          xs={12}\n        >\n          <div className={classes.content}>\n            <div className={classes.contentBody}>\n              <form className={classes.form}>\n                <Typography\n                  className={classes.title}\n                  variant=\"h2\"\n                >\n                  Sistem informasi <br />\n                  Penjualan Kardus berbasis Web\n                </Typography>\n                <div className={classes.fields}>\n                  <TextField\n                    className={classes.textField}\n                    label=\"Username\"\n                    name=\"username\"\n                    onChange={event =>\n                      handleFieldChange('username', event.target.value)\n                    }\n                    type=\"text\"\n                    value={values.username}\n                    variant=\"outlined\"\n                  />\n                  {showUsernameError && (\n                    <Typography\n                      className={classes.fieldError}\n                      variant=\"body2\"\n                    >\n                      {errors.username[0]}\n                    </Typography>\n                  )}\n                  <TextField\n                    className={classes.textField}\n                    label=\"Password\"\n                    name=\"password\"\n                    onChange={event =>\n                      handleFieldChange('password', event.target.value)\n                    }\n                    type=\"password\"\n                    value={values.password}\n                    variant=\"outlined\"\n                  />\n                  {showPasswordError && (\n                    <Typography\n                      className={classes.fieldError}\n                      variant=\"body2\"\n                    >\n                      {errors.password[0]}\n                    </Typography>\n                  )}\n                </div>\n                {submitError && (\n                  <Typography\n                    className={classes.submitError}\n                    variant=\"body2\"\n                  >\n                    {submitError}\n                  </Typography>\n                )}\n                {isLoading ? (\n                  <CircularProgress className={classes.progress} />\n                ) : (\n                  <Button\n                    className={classes.signInButton}\n                    color=\"primary\"\n                    disabled={!isValid}\n                    onClick={handleSignIn}\n                    size=\"large\"\n                    variant=\"contained\"\n                  >\n                    Sign in now\n                  </Button>\n                )}\n                <Typography\n                  className={classes.signUp}\n                  variant=\"body1\"\n                >\n                  Don't have an account? Please contact Admin\n                </Typography>\n              </form>\n            </div>\n          </div>\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nSignIn.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired\n};\n\nexport default compose(\n  withRouter,\n  withStyles(styles)\n)(SignIn);\n"]},"metadata":{},"sourceType":"module"}