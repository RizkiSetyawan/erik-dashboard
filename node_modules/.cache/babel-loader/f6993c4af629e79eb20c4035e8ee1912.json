{"ast":null,"code":"import _regeneratorRuntime from \"/Users/rizki/Documents/work/dashboard-erik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/rizki/Documents/work/dashboard-erik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/rizki/Documents/work/dashboard-erik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/rizki/Documents/work/dashboard-erik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/rizki/Documents/work/dashboard-erik/src/views/SignIn/index.jsx\";\nimport React, { Component, useState, useContext } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport AuthContext from '../../context/auth/authContext'; // Externals\n\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport validate from 'validate.js';\nimport _ from 'underscore'; // Material helpers\n\nimport { withStyles } from '@material-ui/core/styles/index'; // Material components\n\nimport Grid from '@material-ui/core/Grid/index';\nimport Button from '@material-ui/core/Button/index';\nimport CircularProgress from '@material-ui/core/CircularProgress/index';\nimport IconButton from '@material-ui/core/IconButton/index';\nimport TextField from '@material-ui/core/TextField/index';\nimport Typography from '@material-ui/core/Typography/index'; // Component styles\n\nimport styles from './styles'; // Form validation schema\n\nimport schema from './schema'; // Service methods\n\nvar signIn = function signIn() {\n  return new Promise(function (resolve) {\n    setTimeout(function () {\n      resolve(true);\n    }, 1500);\n  });\n};\n\nvar SignIn = function SignIn(props) {\n  var _useState = useState({\n    values: {\n      username: '',\n      password: ''\n    },\n    touched: {\n      username: false,\n      password: false\n    },\n    errors: {\n      username: null,\n      password: null\n    },\n    isValid: false,\n    isLoading: false,\n    submitError: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var validateForm = _.debounce(function () {\n    var values = state.values;\n\n    var newState = _objectSpread({}, state);\n\n    var errors = validate(values, schema);\n    newState.errors = errors || {};\n    newState.isValid = errors ? false : true;\n    setState(newState);\n  }, 300);\n\n  var handleFieldChange = function handleFieldChange(field, value) {\n    var newState = _objectSpread({}, state);\n\n    newState.submitError = null;\n    newState.touched[field] = true;\n    newState.values[field] = value;\n    setState(newState, validateForm);\n  };\n\n  var handleSignIn =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var history, _values;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              history = props.history;\n              _values = state.values;\n              setState({\n                isLoading: true\n              });\n              _context.next = 6;\n              return signIn(_values.username, _values.password);\n\n            case 6:\n              localStorage.setItem('isAuthenticated', true);\n              history.push('/dashboard');\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              setState({\n                isLoading: false,\n                serviceError: _context.t0\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function handleSignIn() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var classes = props.classes;\n  var values = state.values,\n      touched = state.touched,\n      errors = state.errors,\n      isValid = state.isValid,\n      submitError = state.submitError,\n      isLoading = state.isLoading;\n  var authContext = useContext(AuthContext);\n  var token = authContext.token,\n      login = authContext.login,\n      error = authContext.error,\n      isAuthenticated = authContext.isAuthenticated;\n  var showUsernameError = touched.username && errors.username;\n  var showPasswordError = touched.password && errors.password;\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    className: classes.grid,\n    container: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    className: classes.quoteWrapper,\n    item: true,\n    lg: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.quote,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.quoteInner,\n    style: {\n      backgroundColor: 'rgba(0,0,0,.4)',\n      padding: '20px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.quoteText,\n    variant: \"h1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"PT PANCAMITRA PACKINDO\"), React.createElement(\"div\", {\n    className: classes.person,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.name,\n    variant: \"body1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, \"Sistem informasi\"), React.createElement(Typography, {\n    className: classes.bio,\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"Penjualan Kardus berbasis Web\"))))), React.createElement(Grid, {\n    className: classes.content,\n    item: true,\n    lg: 7,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.content,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.contentBody,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: classes.form,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.title,\n    variant: \"h2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"Sistem informasi \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }), \"Penjualan Kardus berbasis Web\"), React.createElement(\"div\", {\n    className: classes.fields,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    className: classes.textField,\n    label: \"Username\",\n    name: \"username\",\n    onChange: function onChange(event) {\n      return handleFieldChange('username', event.target.value);\n    },\n    type: \"text\",\n    value: values.username,\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), showUsernameError && React.createElement(Typography, {\n    className: classes.fieldError,\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, errors.username[0]), React.createElement(TextField, {\n    className: classes.textField,\n    label: \"Password\",\n    name: \"password\",\n    onChange: function onChange(event) {\n      return handleFieldChange('password', event.target.value);\n    },\n    type: \"password\",\n    value: values.password,\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }), showPasswordError && React.createElement(Typography, {\n    className: classes.fieldError,\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, errors.password[0])), submitError && React.createElement(Typography, {\n    className: classes.submitError,\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, submitError), isLoading ? React.createElement(CircularProgress, {\n    className: classes.progress,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }) : React.createElement(Button, {\n    className: classes.signInButton,\n    color: \"primary\",\n    disabled: !isValid,\n    onClick: handleSignIn,\n    size: \"large\",\n    variant: \"contained\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, \"Sign in now\"), React.createElement(Typography, {\n    className: classes.signUp,\n    variant: \"body1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }, \"Don't have an account?\", ' ', \"Please contact Admin\")))))));\n};\n\nSignIn.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired\n};\nexport default compose(withRouter, withStyles(styles))(SignIn);","map":{"version":3,"sources":["/Users/rizki/Documents/work/dashboard-erik/src/views/SignIn/index.jsx"],"names":["React","Component","useState","useContext","Link","withRouter","AuthContext","PropTypes","compose","validate","_","withStyles","Grid","Button","CircularProgress","IconButton","TextField","Typography","styles","schema","signIn","Promise","resolve","setTimeout","SignIn","props","values","username","password","touched","errors","isValid","isLoading","submitError","state","setState","validateForm","debounce","newState","handleFieldChange","field","value","handleSignIn","history","localStorage","setItem","push","serviceError","classes","authContext","token","login","error","isAuthenticated","showUsernameError","showPasswordError","root","grid","quoteWrapper","quote","quoteInner","backgroundColor","padding","quoteText","person","name","bio","content","contentBody","form","title","fields","textField","event","target","fieldError","progress","signInButton","signUp","propTypes","className","string","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component, useState, useContext } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport AuthContext from '../../context/auth/authContext'\n\n// Externals\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport validate from 'validate.js';\nimport _ from 'underscore';\n\n// Material helpers\nimport { withStyles } from '@material-ui/core/styles/index';\n\n// Material components\nimport Grid from '@material-ui/core/Grid/index';\nimport Button from '@material-ui/core/Button/index';\nimport CircularProgress from '@material-ui/core/CircularProgress/index';\nimport IconButton from '@material-ui/core/IconButton/index';\nimport TextField from '@material-ui/core/TextField/index';\nimport Typography from '@material-ui/core/Typography/index';\n\n// Component styles\nimport styles from './styles';\n\n// Form validation schema\nimport schema from './schema';\n\n// Service methods\nconst signIn = () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(true);\n    }, 1500);\n  });\n};\n\nconst SignIn = props => {\n  const [state, setState] = useState ({\n    values: {\n      username: '',\n      password: ''\n    },\n    touched: {\n      username: false,\n      password: false\n    },\n    errors: {\n      username: null,\n      password: null\n    },\n    isValid: false,\n    isLoading: false,\n    submitError: null\n  });\n\n  const validateForm = _.debounce(() => {\n    const { values } = state;\n\n    const newState = { ...state };\n    const errors = validate(values, schema);\n\n    newState.errors = errors || {};\n    newState.isValid = errors ? false : true;\n\n    setState(newState);\n  }, 300);\n\n  const handleFieldChange = (field, value) => {\n    const newState = { ...state };\n\n    newState.submitError = null;\n    newState.touched[field] = true;\n    newState.values[field] = value;\n\n    setState(newState, validateForm);\n  };\n\n  const handleSignIn = async () => {\n    try {\n      const { history } = props;\n      const { values } = state;\n\n      setState({ isLoading: true });\n\n      await signIn(values.username, values.password);\n\n      localStorage.setItem('isAuthenticated', true);\n\n      history.push('/dashboard');\n    } catch (error) {\n      setState({\n        isLoading: false,\n        serviceError: error\n      });\n    }\n  };\n\n    const { classes } = props;\n    const {\n      values,\n      touched,\n      errors,\n      isValid,\n      submitError,\n      isLoading\n    } = state;\n\n    const authContext = useContext(AuthContext)\n    const { token, login, error, isAuthenticated } = authContext\n\n    const showUsernameError = touched.username && errors.username;\n    const showPasswordError = touched.password && errors.password;\n\n    return (\n      <div className={classes.root}>\n        <Grid\n          className={classes.grid}\n          container\n        >\n          <Grid\n            className={classes.quoteWrapper}\n            item\n            lg={5}\n          >\n            <div className={classes.quote}>\n              <div className={classes.quoteInner} style={{backgroundColor:'rgba(0,0,0,.4)', padding: '20px'}}>\n                <Typography\n                  className={classes.quoteText}\n                  variant=\"h1\"\n                >\n                  PT PANCAMITRA PACKINDO\n                </Typography>\n                <div className={classes.person}>\n                  <Typography\n                    className={classes.name}\n                    variant=\"body1\"\n                  >\n                    Sistem informasi\n                  </Typography>\n                  <Typography\n                    className={classes.bio}\n                    variant=\"body2\"\n                  >\n                    Penjualan Kardus berbasis Web\n                  </Typography>\n                </div>\n              </div>\n            </div>\n          </Grid>\n          <Grid\n            className={classes.content}\n            item\n            lg={7}\n            xs={12}\n          >\n            <div className={classes.content}>\n              <div className={classes.contentBody}>\n                <form className={classes.form}>\n                  <Typography\n                    className={classes.title}\n                    variant=\"h2\"\n                  >\n                    Sistem informasi <br />Penjualan Kardus berbasis Web\n                  </Typography>\n                  <div className={classes.fields}>\n                    <TextField\n                      className={classes.textField}\n                      label=\"Username\"\n                      name=\"username\"\n                      onChange={event =>\n                        handleFieldChange('username', event.target.value)\n                      }\n                      type=\"text\"\n                      value={values.username}\n                      variant=\"outlined\"\n                    />\n                    {showUsernameError && (\n                      <Typography\n                        className={classes.fieldError}\n                        variant=\"body2\"\n                      >\n                        {errors.username[0]}\n                      </Typography>\n                    )}\n                    <TextField\n                      className={classes.textField}\n                      label=\"Password\"\n                      name=\"password\"\n                      onChange={event =>\n                        handleFieldChange('password', event.target.value)\n                      }\n                      type=\"password\"\n                      value={values.password}\n                      variant=\"outlined\"\n                    />\n                    {showPasswordError && (\n                      <Typography\n                        className={classes.fieldError}\n                        variant=\"body2\"\n                      >\n                        {errors.password[0]}\n                      </Typography>\n                    )}\n                  </div>\n                  {submitError && (\n                    <Typography\n                      className={classes.submitError}\n                      variant=\"body2\"\n                    >\n                      {submitError}\n                    </Typography>\n                  )}\n                  {isLoading ? (\n                    <CircularProgress className={classes.progress} />\n                  ) : (\n                    <Button\n                      className={classes.signInButton}\n                      color=\"primary\"\n                      disabled={!isValid}\n                      onClick={handleSignIn}\n                      size=\"large\"\n                      variant=\"contained\"\n                    >\n                      Sign in now\n                    </Button>\n                  )}\n                  <Typography\n                    className={classes.signUp}\n                    variant=\"body1\"\n                  >\n                    Don't have an account?{' '}\n                    Please contact Admin\n                  </Typography>\n                </form>\n              </div>\n            </div>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n\nSignIn.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired\n};\n\nexport default compose(\n  withRouter,\n  withStyles(styles)\n)(SignIn);\n"]},"metadata":{},"sourceType":"module"}